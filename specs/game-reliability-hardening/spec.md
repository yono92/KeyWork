# spec.md

## 기능명
게임 안정성 강화 및 장애 대응 UX 개선

## 문제 정의 (사용자 관점)
- 끝말잇기/단어낙하/타이핑연습은 외부 API 상태에 따라 플레이 가능 여부가 달라진다.
- 사용자는 실패 원인을 알기 어렵고, 어떤 경우에는 즉시 진행이 막힌다.

## 사용자 스토리
1. 사용자는 사전 API가 느리거나 실패해도, 게임을 계속 진행할 수 있길 원한다.
2. 사용자는 왜 실패했는지와 지금 가능한 대안(재시도/로컬 모드)을 명확히 알고 싶다.
3. 운영자는 어떤 API가 얼마나 자주 실패하는지 기록으로 확인하고 싶다.

## 기능 요구사항
1. API 호출 실패/타임아웃 시 게임별 폴백 규칙을 제공해야 한다.
2. 동일 유형 실패 메시지는 게임 전반에서 일관된 카피/톤으로 노출해야 한다.
3. 사용자 액션 기반 재시도(`다시 시도`)를 제공해야 한다.
4. 서버 라우트는 응답에 최소 진단 정보(`source`, `errorCode`)를 포함해야 한다.
5. 장애 이벤트는 개발 환경에서 구조화 로그로 남겨야 한다.
6. 폴백 경로(로컬 단어/문장 데이터) 사용 시 명시적 상태를 UI에 보여줘야 한다.

## 비기능 요구사항
1. 외부 API 타임아웃은 2초~3초 내로 제한한다.
2. 폴백 전환은 사용자 체감 1초 이내를 목표로 한다.
3. 기존 점수/XP 로직과 게임 룰은 변경하지 않는다.

## 수용 기준 (Acceptance Criteria)
1. `word-chain`에서 사전 API 실패 시 게임은 종료되지 않고, 로컬 후보 단어로 진행 가능해야 한다.
2. `falling-words` 한국어 단어 API 실패 시 즉시 로컬 `word.json`으로 자동 전환되어 플레이가 가능해야 한다.
3. `practice` 위키 API 실패 시 기본 문장/속담 폴백이 제공되어 빈 화면이 발생하지 않아야 한다.
4. API 라우트 테스트에서 실패/타임아웃/성공 케이스가 모두 검증되어야 한다.
5. `npm run lint`, `npm run test:run`, `npm run build`가 모두 통과해야 한다.
